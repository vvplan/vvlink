{
  
    
        "post0": {
            "title": "设计一个多人互动游戏",
            "content": "设计一个多人互动游戏——以“赛龙舟”为例 . 浙江省温州中学 谢作如 . 上海师范大学 陆雅楠 . 涉及学科：艺术、数学、信息技术 . 利用编程软件和开源硬件制作的人机互动游戏案例已经越来越多，但是多人互动的游戏却很少见，因为这需要网络的支持。掌控板是一款使用物联网芯片开发的开源硬件，具备了连接网络的功能，如何运用类似掌控板之类能够联网的开源硬件，设计可以多人互动的游戏，成为我们研究的新方向。 . 赛龙舟是我国重要的一项习俗活动，是一项典型的集体竞赛活动。让这项活动搬入室内，甚至是搬入课堂，以一种全新的形式呈现出来，肯定挺好玩。掌控板自带了加速度传感器，可以感知“划桨”的动作，再结合物联网技术，将大家的动作统一呈现在一个屏幕上，为“赛龙舟”的游戏设计提供了技术上的保障。 . . 图 赛龙舟游戏 . 一、多人互动游戏的技术分析 . 物联网（Internet of Things，简称IoT）是借助互联网、传统电信网等信息承载体，让所有能行使独立功能的普通物体实现互联互通的网络。MQTT是常见的物联网通讯协议，采用主题（TopicID）来实时发送和接收（订阅）消息，使用起来非常简单。 . . 掌控板支持MQTT协议。本游戏案例为人手一块掌控板，设置掌控板连接Wi-Fi，然后利用掌控板的加速度传感器感知晃动幅度，即划桨的动作，然后上传到MQTT服务器。Mind+软件也连接MQTT服务器，订阅物联网信息，再用不同的龙舟角色呈现不同掌控板的前进速度，就完成了这一互动游戏。系统运行流程如图所示。 . . 图 系统运行流程 . 二、开发工具准备 . 1.Mind+ . Mind+是著名开源硬件企业DFRobot推出的IDE工具。其支持两种编程模式，一是实时交互模式，二是离线下载模式。实时交互模式类似普通的Scratch程序，离线下载模式则是指给Arduino、掌控板写程序。Mind+可以直接访问MQTT服务器，和其他接入MQTT服务器的智能硬件进行交互。基于Mind+的MQTT简单调试如图所示。 . . 图 MQTT调试图 . 2.掌控板 . 一个游戏用户需要一块掌控板。根据赛龙舟的活动特点，制作一个船桨，将掌控板安装到船桨上采集真实的“划桨”数据，如图所示。注意，掌控板要加电源哦。图中的掌控板加了带电源的扩展板。 . . 图 安装有掌控板的船桨 . 3.SIoT服务器 . SIoT是一个跨平台的标准MQTT服务器，不需要经过复杂的配置，一键启动即可使用。SIoT也是一款开源软件，是“虚谷物联”项目的核心软件，根据操作系统下载相应的版本即可。 . 三、代码编写 . 1.物联网环境准备 . 双击运行与系统匹配的SIoT运行文件，屏幕会弹出一个黑色的CMD窗口，确保在配置中此窗口不关闭。 . . 图 SIoT运行窗口 . 运行Mind+软件，并在拓展中选择“网络服务”并添加“MQTT”，如图所示。 . . 图 Mind+软件界面 . 2.掌控板代码 . 掌控板的代码使用Mind+的“下载模式”编写。首先掌控板设备与服务器建立连接，在服务器上能够实时反馈数据。设置变量g1与g2分别代表玩家一次划桨的前后加速度（可通过读取一次划桨前后桨上掌控板不同位置的加速度获取），从而计算了桨的晃动幅度，然后上传到MQTT服务器。 . . 图 掌控板参考代码 . “MQTT初始化参数”设置：服务器地址设置为SIoT服务器的IP地址，TopicID（主题）设置为“项目ID/名称”。不同的掌控板设置不同的TopicID ，如“longzhou/0”、 “longzhou/1”、 “longzhou/2”分别代表3块掌控板。 . . 图 MQTT初始化参数设置 . 3.Mind+代码 . Mind+的代码在“实时模式”下编写，需要设置一个河水的背景，然后添加龙舟角色，根据掌控板的数量添加多个角色。同样在 “MQTT初始化参数”中设置“longzhou/0”、 “longzhou/1”、 “longzhou/2”这三个TopicID。 . 通过不同玩家控制的掌控板传来的顺序，一一对应到各自的角色（龙舟）上，不同晃动幅度龙舟的前进速度不同。 . . 图 龙舟角色的参考代码 . 四、游戏测试 . 每名玩家手持装有掌控板的船桨一柄，每名玩家代表一条龙舟。当掌控板出现数值就表示连接MQTT服务器成功，就开始游戏了。Mind+软件会准确计算出每名玩家的划桨幅度并将其呈现在龙舟的前进速度中，最终玩家们根据龙舟触边先后决出胜负。其测试效果如图所示。 . . 图 游戏测试图1 . . 图 游戏测试图2 . 五、结语和展望 . 这款游戏还可以继续改进，如：（1）可以通过添加音效使得游戏更加真实，玩家体验感更好；（2）在背景画面上可以添加动图效果，制作出龙舟比赛时水流的特效；（3）可以思考设计团队模式游戏，三人一组划一条龙舟进行竞赛。 . 结合SIoT和掌控板，可以设计更多有意思的多人互动游戏，也可以设计一些真实的应用，如网络投票。在一些集体活动中玩这样的互动游戏，不仅有趣，还能够培养集体意识呢。希望本案例能抛砖引玉，有更多的老师带领学生做类似的研究。 .",
            "url": "/vvlink/2020/04/15/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E5%A4%9A%E4%BA%BA%E4%BA%92%E5%8A%A8%E6%B8%B8%E6%88%8F.html",
            "relUrl": "/2020/04/15/%E8%AE%BE%E8%AE%A1%E4%B8%80%E4%B8%AA%E5%A4%9A%E4%BA%BA%E4%BA%92%E5%8A%A8%E6%B8%B8%E6%88%8F.html",
            "date": " • Apr 15, 2020"
        }
        
    
  

  
  

  
      ,"page1": {
          "title": "简介",
          "content": "“万物互联”的时代正渐行渐近，物联网技术也越来越受到创客教育、STEAM教育领域的重视。“虚谷物联“是“虚谷计划”旗下的项目，由“虚谷计划”组委会发起，提供了开源MQTT服务器SIoT和一系列教学解决方案。SIoT可以布署在本地电脑，同时支持WebAPI，结合虚谷号和掌控板，让物联网技术进入基础教育成为可能，不仅可以搭建各种物联网应用，还提供了以“数据探究”的方式去研究科学的新手段。———项目联合发起人谢作如（浙江省温州中学） . 源起：初心总在物联网 . 第一次听到“物联网（IoT）”这一名词，是在2011年左右。当时，我和学生找zigbee技术的资料时无意中发现了它。 . zigbee是物联网领域的常用协议之一。我和zigbee的缘分，可以追溯到2010年我买第一块开源硬件（Arduino）的时候。这段故事我在很多场合反复讲过：因为学生的项目涉及远程实时监测水质，所以不仅需要无线连接，还要做到定时采集数据。Arduino、zigbee和数据采集是我进入开源硬件领域的几个重要印记。 . 接下来的经历，差不多就是中国创客教育发展的历史。从2011年开始，我亲历了国内创客教育、STEAM教育等跨学科学习概念从无到有的过程。所谓不忘初心，在夜深人静独处创客空间的时候，我常常会问自己： 当年就是因为研究物联网而接触到开源硬件领域，从而致力于推广创客教育。现在创客教育已经写入国家教育政策了，但是物联网技术呢？怎么让更多学生在课堂上真正学习物联网技术？如何让跨学科学习的主题能结合真实的数据进行探究？ . 遇阻：巧妇难为无米炊 . 我曾经认真研究过江苏省的物联网课程。不可否认，无锡是全国范围内最早把物联网技术做成课程，而后江苏省编写了义务教育信息技术课程指导纲要，把“物联网技术”作为一个拓展模块。当我通过江苏的老师找到相关《物联网技术》教材后，却失望了。因为教材仅仅采用科普的形式，展示物联网的神奇应用，逐一介绍各种传感器、RFID设备等，学生并没有机会真正使用这些设备。哪怕学习了整个课程，学生也只能了解物联网技术的皮毛，根本不可能自己动手去设计或者搭建一个简单的物联网应用了。 . 2014年，我和南师大研究生刘正云开发了一门《大数据和物联网创意实验》课程。我希望这门课程最终能够开源推广，所以要找到最合适的工具和平台。但最大的难点就在这方面：首先是找不到适用于大班教学的物联网平台，其次是找不到能够支持无线连接、价格低廉且编程容易的开源硬件。这个课程的设计理念再好、再先进也没用，最终胎死腹中。 . 当然，国内也有一些企业专门帮学校建设各种物联网实验室。但这些实验室往往造价不菲，从数十万到数百万不等。且不说价格太高无法普及，其功能类似于现在的小米智能家居，学生没有办法通过这些平台真正学习到物联网的核心技术，更不要说通过物联网技术去采集数据，探究数据了。 . 造价过高的实验室总归没有推广的价值。为什么智慧城市、智慧教育喊了这么多年，学生却没有机会学习物联网技术呢？更多人关注的是新技术用于教育，而我总希望让学生掌握新技术。虽然失望，但我并不放弃，继续寻找，继续等机会。 . 契机：万事俱备唤东风 . 机会终于来了。 . 首先是高中课程标准的修订。信息技术和数学课的课程标准中，都增加了与大数据技术息息相关的内容。信息技术课标中不断强调“数据”一词，突出了数据采集、数据分析等。比如必修模块1的名称就是《数据与计算》，其介绍如下： 信息技术与社会的交互融合引发了数据量的迅猛增长，数据对社会生产和人们生活的影响日益凸显。本模块针对数据(包括大数据)在信息社会中的重要价值，分析数据与信息的关系，强调数据处理的基本方法与技能，发展学生利用信息技术解决问题的能力。 . 不仅如此，在必修模块2和选择性必修的“网络基础”模块，都明确写上了“物联网技术”。比如必修模块2中有这样的要求：“2.3 通过分析物联网应用实例，知道信息系统与外部世界的连接方式，了解常见的传感与控制机制。”“网络基础”模块则将“物联网”作为三大内容之一。 . 高中数学课标中增加了两个学科核心素养，分别为数学建模和数据分析。其中“数据分析”是这样介绍的： 数据分析是指针对研究对象获得相关数据，运用数学方法对数据进行整理、分析和推断，形成关于研究对象知识的素养。数据分析过程主要包括：收集数据，整理数据，提取信息，构建模型，进行推断，获得结论。数据分析是研究随机现象的重要数学技术，是大数据时代数学应用的主要方法，也是“互联网+”相关领域的主要数学方法，数据分析已经深入到科学、技术、工程和现代生活的各个方面。 . 其次是国产物联网芯片的成熟。如果说课标提供了“物联网进课堂“的理由，那么ESP系列物联网芯片的兴起提供了条件。2016年最火的WiFi模块，无疑是ESP8266。紧接着发布的ESP32更受欢迎：双核32位MCU、2.4GHz双模Wi-Fi和蓝牙芯片，主频高达230MHz，一下子把可联网的智能终端成本从百元降到了几十元。 . 问世：从零开始建平台 . 我有幸参加了浙江教育出版社版本的全国高中《信息技术》教材编写。编写教材需要了解市场上各种能够支持新课标教学的产品。苦于我国一直没有国产开源硬件，于是我和课标组的专家樊磊、教育部装备中心梁森山等朋友共同发起一个公益的国产开源硬件项目——“虚谷计划”。其中，使用ESP32芯片的掌控板发布后得到一线教师和社会创客的普遍认同。 . 掌控板仅仅解决了物联网的采集终端的低成本化，物联网技术的教学还需要专用的物联网平台的开发。恰好温州市科技局拨了一批经费来资助STEAM教育项目，于是我申报了一个项目，申请了一笔不多不少的资金，刚好可以用于物联网平台的前期开发。但这个为中小学教学定制的物联网平台究竟需要怎样的功能，需要我来进行系统规划。 . 记得2018年的除夕夜，我坐在饭桌前写教学系统的开发需求。写着写着，忽然听到儿子喊我。抬头一看电视屏幕，新年钟声要敲响了。刹那间被自己感动了：我竟然是如此迫切地需要这样的教学平台。 . 在这个跨年度写就的系统需求书中，我提出几个关键需求，如跨平台、一键安装、多用户使用但无需注册、支持MQTT协议也支持HTTP协议、支持数据采集和导出等等，都是从一线教师开展大班教学的角度提出的。因为，任何需要教师付出很多精力才能实施的课程，哪怕再好也是不可复制的。 . 经过几次的沟通，系统规划确定下来了。再过了两个月，平台的雏形顺利出来了。我们给这个系统取了一个名字——SIoT。IoT是物联网的缩写，“S”则具有多种含义，如： 1）一个目前为科学（Science）数据采集、分析、导出定制的IoT平台，适用于中小学跨学科学习（STEAM、STEM）的IoT平台； 2）一个和少儿编程软件（Scratch）互联的IoT平台，小型（Small ）、简单（Simple ）的IoT平台，能够让物联网的学习变得如Scratch教学一样简单。 . 应用：科学创客大数据 . SIoT开发和掌控板结合到底能做什么？为了更好地推动物联网技术的教学，我以“虚谷计划”组委会的名义，联合天津师大教师教育国家级实验教学示范中心发起了“虚谷物联”项目。在项目的主页，我做了这样的介绍： “万物互联”的时代正渐行渐近，物联网技术也越来越受到创客教育、STEAM教育领域的重视。但由于缺乏简单易用的物联网平台和廉价稳定的智能终端，中小学生很难有机会通过剖析物联网产品，真正学习物联网技术并设计相关应用。SIoT和掌控板的出现，不仅让物联网技术进入基础教育成为可能，还提供了一种更加便捷的数据采集方式，帮助学生使用“数据探究”的方式去研究科学问题。 . 我们来想象一下教学场景吧： 教师在教学电脑上运行SIoT，学生给掌控板编程，连接MQTT服务器，测试物联网消息的发送和订阅的实验。学生也可以自己运行SIoT，同桌之间相互访问，并且通过这个MQTT服务器，设计一个网络应用，让彼此的电脑可以相互通讯。可穿戴设备、智能家居，在物联网技术的支持下，学生创客作品的技术含量大大提高。 . 学校里做了一个小型的气象站（环境信息采集装置），那就在学校局域网内部找台电脑运行SIoT吧，将所有的数据发过去。要长时间采集，采集几年下来，再研究这些数据告诉了我们什么信息。同学们可以订阅这个气象站的信息，随时了解数据情况。 . SIoT可以导出所有的数据，让学生研究、分析。科学老师可以用，数学老师可以用。做热辐射实验时，学生再也不用在烈日下晒了，躲在树荫下就能查看无线接收的数据。那个很难做成功的植物呼吸的实验，有了传感器和物联网变得异常轻松。 . …… . 在SIoT和掌控板的支持下，开设实施物联网课程和相关研究，金钱成本和时间成本都大幅度降低，让普及成为可能。 . 评价：教育普惠终可期 . 2019年4月，我应联合国教科文组织的邀请，参加2019移动学习周活动，并且进行了关于“虚谷计划”的演讲，虚谷号、掌控板以及虚谷物联项目得到国际友人的好评。2019年5月下旬，“虚谷物联”项目在天津师大发布，天津师大的副校长前来致辞，并给天津市的科技辅导员开始了全国第一次的省市级培训。随后，福建省骨干教师、广东省创客教育教师等培训活动中，都开始加入了“虚谷物联”的内容。 . “虚谷物联”项目在猫友汇、蘑菇云、创客教育能量站等微信群不断转发。因为操作简单、功能强大，加上文档全面，“虚谷物联”项目得到很多一线创客老师关注，一时间各种活动案例涌现。6月份，离项目正式发布不到一个月，各种好消息不断传回来：宁波的狄勇老师带着五年级小学生，用SIoT采集科学实验数据，研究阳光辐射。平阳的教研员组建了一个团队，准备开发一个物联网方面的开源课程，给全国各地的老师使用。北京二中的高凯老师在人民教育出版社的全国综合实践活动教材中，加入了“物联网”项目，用的技术就是SIoT加掌控板。浙江省的初中信息技术教材，也准备用类似的方式加入“物联网”学习内容。 . 感谢DFRobot和盛思两大企业的工程师，还有散落在我国各个地区的创客大神，帮“虚谷物联”项目解决了很多技术难题。 . 感谢我的学生们，包括来我校创客空间实习的天津师大、温州大学的研究生和本科生，还有刚刚离开温州中学创客空间就读大学的学生。他们积极参与这个项目，和我一起编写并维护“虚谷物联”的开源文档。 . 这就是“虚谷物联”的故事，一个普通的信息技术教师，因为对物联网技术的执念，聚集了来自各个方面的力量，努力去改变信息技术教育的现状，就为了让越来越多的孩子能够学习新技术，轻松驾驭物联网，体验大数据。 .",
          "url": "/vvlink/about/",
          "relUrl": "/about/",
          "date": ""
      }
      
  

  

  
      ,"page3": {
          "title": "资源",
          "content": "项目资源 . GitHub | 码云（镜像） | . 软件下载 . GitHub | dfrobot | . 文档阅读 . readthedocs | . 硬件推荐 . 虚谷物联项目推荐各种开源硬件。 . 1.掌控板 . 项目首页 | 购买地址： | . 2.虚谷号 . 虚谷号不仅可以用来作为运行SIoT的服务器，还可以作为终端。 . 项目首页 | 购买地址： | .",
          "url": "/vvlink/resource/",
          "relUrl": "/resource/",
          "date": ""
      }
      
  

  
      ,"page4": {
          "title": "方案",
          "content": "如何实施物联网教学？如何建设一个物联网实验室？ . 参考方案 .",
          "url": "/vvlink/scheme/",
          "relUrl": "/scheme/",
          "date": ""
      }
      
  

  
  

  

  
  

  

  
  

  
  

  
  

  
      ,"page12": {
          "title": "",
          "content": "Sitemap: {{ “sitemap.xml” | absolute_url }} | .",
          "url": "/vvlink/robots.txt",
          "relUrl": "/robots.txt",
          "date": ""
      }
      
  

}